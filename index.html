<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire Ã©tendu</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-gray-200 h-screen flex items-center justify-center">

<div x-data="data()" class="bg-white p-8 rounded-lg shadow-md w-full max-w-2xl">
    <!-- Tout le contenu de votre formulaire ici -->
    
    <div class="mb-6 flex justify-between items-center">
        <div :class="step >= 1 ? 'text-blue-500' : 'text-gray-400'">Votre situation</div>
        <div :class="step >= 5 ? 'text-blue-500' : 'text-gray-400'">Vos finances</div>
        <div :class="step >= 9 ? 'text-blue-500' : 'text-gray-400'">Vos infos</div>
        <div :class="step >= 11 ? 'text-blue-500' : 'text-gray-400'">Votre bilan</div>
    </div>
    <div class="mb-6">
        <div class="h-2 bg-gray-200 rounded">
            <div :style="'width:' + (step/maxStep)*100 + '%'" class="h-2 bg-blue-500 rounded"></div>
        </div>
    </div>

    <!-- Ã‰tape 1 : Votre situation -->
    <div x-show="step === 1">
        <p class="mb-4 text-gray-700">Quelle est votre situation ? ğŸ‘«</p>
        <div class="flex flex-col gap-2">
            <button @click="situation = 'CÃ©libataire'" :class="situation === 'CÃ©libataire' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">CÃ©libataire</button>
            <button @click="situation = 'MariÃ©(e)/PacsÃ©(e)'" :class="situation === 'MariÃ©(e)/PacsÃ©(e)' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">MariÃ©(e)/PacsÃ©(e)</button>
            <button @click="situation = 'DivorcÃ©(e)'" :class="situation === 'DivorcÃ©(e)' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">DivorcÃ©(e)</button>
            <button @click="situation = 'En concubinage'" :class="situation === 'En concubinage' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">En concubinage</button>
            <button @click="situation = 'Veuf(ve)'" :class="situation === 'Veuf(ve)' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">Veuf(ve)</button>
        </div>
    </div>

    <!-- Ã‰tape 2 : Quel Ã¢ge avez-vous ? -->
    <div x-show="step === 2">
        <label class="block mb-4">
            <span class="text-gray-700">Quel Ã¢ge avez-vous ? ğŸ‚</span>
            <input x-model="age" class="mt-1 p-2 w-full border rounded-md" type="number" placeholder="Entrez votre Ã¢ge">
        </label>
    </div>

    <!-- Ã‰tape 3 : Quel est votre code postal ? -->
    <div x-show="step === 3">
        <label class="block mb-4">
            <span class="text-gray-700">Quel est votre code postal ?</span>
            <input x-model="postalCode" @input="fetchCity()" class="mt-1 p-2 w-full border rounded-md" type="text" placeholder="Entrez votre code postal">
        </label>
        <div x-show="suggestedCities.length > 0" class="mt-2 border rounded-md shadow-lg bg-white">
            <template x-for="city in suggestedCities" :key="city.postalCode">
                <div @click="() => selectCity(city)" class="cursor-pointer hover:bg-gray-200 p-2">
                    <span x-text="city.label"></span>
                </div>
            </template>
        </div>
      
    </div>

    <!-- Ã‰tape 4 : Quelle est votre activitÃ© ? -->
    <div x-show="step === 4">
        <p class="mb-4 text-gray-700">Quelle est votre activitÃ© ? ğŸ’¼</p>
        <div class="flex flex-col gap-2">
            <button @click="activity = 'SalariÃ©'" :class="activity === 'SalariÃ©' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">SalariÃ©</button>
            <button @click="activity = 'IndÃ©pendant/Chef d entreprise'" :class="activity === 'IndÃ©pendant/Chef d entreprise' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">IndÃ©pendant/Chef d'entreprise</button>
            <button @click="activity = 'Etudiant/Apprenti'" :class="activity === 'Etudiant/Apprenti' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">Etudiant/Apprenti</button>
            <button @click="activity = 'Sans activitÃ©/au chÃ´mage'" :class="activity === 'Sans activitÃ©/au chÃ´mage' ? 'bg-blue-500 text-white' : 'bg-gray-300'" class="px-4 py-2 rounded-md">Sans activitÃ©/au chÃ´mage</button>
        </div>

        <div x-show="activity === 'IndÃ©pendant/Chef d entreprise'">
            <label class="block mb-4 mt-4">
                <span class="text-gray-700">Quel est votre bÃ©nÃ©fice annuel ? ğŸ’µ</span>
                <input x-model="amountAnnualBenefice" class="mt-1 p-2 w-full border rounded-md" type="text" placeholder="RÃ©ponse Ã  la question 1">
            </label>
            <label class="block mb-4">
                <span class="text-gray-700">Quel est le montant annuel de vos impÃ´ts et taxes ? ğŸ¦</span>
                <input x-model="amountAnnualTaxes" class="mt-1 p-2 w-full border rounded-md" type="text" placeholder="RÃ©ponse Ã  la question 2">
            </label>
        </div>

    </div>

    <!-- Ã‰tape 5 : Quels sont vos revenus nets d'activitÃ© par mois ? -->
    <div x-show="step === 5">
        <label class="block mb-4">
            <span class="text-gray-700">Quels sont vos revenus nets d'activitÃ© par mois ? ğŸ’¶</span>
            <input x-model="netIncome" class="mt-1 p-2 w-full border rounded-md" type="number" placeholder="Entrez vos revenus">
        </label>
    </div>

    <!-- Ã‰tape 6 : Vos revenus fonciers mensuels ? -->
    <div x-show="step === 6">
        <label class="block mb-4">
            <span class="text-gray-700">Vos revenus fonciers mensuels ? ğŸ </span>
            <input x-model="propertyIncome" class="mt-1 p-2 w-full border rounded-md" type="number" placeholder="Entrez vos revenus fonciers">
        </label>
        <button @click="propertyIncome = 0" class="mt-2 px-4 py-2 bg-gray-300 rounded-md">Pas de revenus fonciers</button>
    </div>

    <!-- Ã‰tape 7 : Avez-vous d'autres revenus mensuels ? -->
    <div x-show="step === 7">
        <label class="block mb-4">
            <span class="text-gray-700">Avez-vous d'autres revenus mensuels ? ğŸ’°</span>
            <input x-model="otherIncome" class="mt-1 p-2 w-full border rounded-md" type="number" placeholder="Dividende, pensions, ..">
        </label>
        <button @click="otherIncome = 0" class="mt-2 px-4 py-2 bg-gray-300 rounded-md">Pas d'autres revenus</button>
    </div>

    <!-- Ã‰tape 8 : Quel est le montant de vos charges mensuelles ? -->
    <div x-show="step === 8">
        <label class="block mb-4">
            <span class="text-gray-700">Quel est le montant de vos charges mensuelles ? ğŸ¦</span>
            <input x-model="monthlyCharges" class="mt-1 p-2 w-full border rounded-md" type="number" placeholder="Taxes d'habitation, IFI, ...">
        </label>
    </div>

    <!-- Ã‰tape 9 : Et pour finir quel est votre nom/prÃ©nom ? -->
    <div x-show="step === 9">
        <label class="block mb-4">
            <span class="text-gray-700">Quel est votre nom ? ğŸ™â€â™‚ï¸</span>
            <input x-model="firstName" class="mt-1 p-2 w-full border rounded-md" type="text" placeholder="Entrez votre prÃ©nom">
        </label>
        <label class="block mb-4">
            <span class="text-gray-700">Quel est votre prÃ©nom ? ğŸ™</span>
            <input x-model="lastName" class="mt-1 p-2 w-full border rounded-md" type="text" placeholder="Entrez votre nom">
        </label>
    </div>

    

    <!-- Ã‰tape 10 : Quelles sont vos coordonnÃ©es ? -->
    <div x-show="step === 10">
        <label class="block mb-4">
            <span class="text-gray-700">Quelles sont vos coordonnÃ©es ? Pour recevoir la synthÃ¨se de votre bilan patrimonial ğŸ“«</span>
            <input x-model="email" class="mt-1 p-2 w-full border rounded-md" type="email" placeholder="Entrez votre email">
        </label>
    </div>

    <!-- Ã‰tape 11 : Bilan Patrimonial -->
    <div x-show="step === 11">

    <div class="flex shadow-lg p-4">
    <!-- Left Column -->
    <div class="left-col col-lg-7 w-1/2 border p-4 relative shadow-md">
        <h5 class="text-center text-xl font-bold mb-4">Bilan patrimonial</h5>
        <canvas id="myCanvas" width="300" height="300"></canvas>
        
        <!-- Tableau -->
       <div class="flex justify-between mb-2">
        <div class="flex items-center">
            <div class="w-4 h-4 bg-yellow-400 mr-2"></div>
            LiquiditÃ© :
        </div>
        <span class="liquidite-val text-right">0â‚¬</span>
    </div>
    <div class="flex justify-between mb-2">
        <div class="flex items-center">
            <div class="w-4 h-4 bg-purple-600 mr-2"></div>
            Retraite :
        </div>
        <span class="retraite-val text-right">0â‚¬</span>
    </div>
    <div class="flex justify-between mb-2">
        <div class="flex items-center">
            <div class="w-4 h-4 bg-pink-500 mr-2"></div>
            Assurance vie :
        </div>
        <span class="assurance-val text-right">0â‚¬</span>
    </div>
    <div class="flex justify-between mb-2">
        <div class="flex items-center">
            <div class="w-4 h-4 bg-blue-400 mr-2"></div>
            Immobilier Locatif :
        </div>
        <span class="immobilier-val text-right">0â‚¬</span>
    </div>
    <div class="flex justify-between">
        <strong>Total :</strong>
        <span class="total-value text-right">0â‚¬</span>
    </div>
    </div>

    <!-- Right Column -->
    <div class="right-col col-lg-5 w-1/2 ml-4 border p-4 flex flex-col justify-between shadow-md">
        <!-- CapacitÃ© d'Ã©pargne -->
        <div class="part1 text-center mb-4 border-b-2 border-gray-300 pb-4">
            <h4 class="mb-2 font-semibold text-lg">CapacitÃ© d'Ã©pargne mensuelle</h4>
            <div class="capacite-result font-bold text-blue-500 text-2xl"></div>
        </div>
        
        <!-- Calculs de retraite -->
        <div class="part2 text-center mb-4 border-b-2 border-gray-300 pb-4">
            <h4 class="mb-2 font-semibold text-lg">Dâ€™aprÃ¨s nos calculs vous toucherez <br>
               <span class="pension-result font-bold text-blue-500 text-1xl"> â‚¬</span> par mois Ã  la retraite</h4>
        </div>
        
        <!-- Ã‰ligibilitÃ© -->
        <div class="part3 text-center">
            <h4 class="mb-2 font-semibold text-lg">Vous Ãªtes Ã©ligible au Bilan Patrimonial !
                Pour optimiser ou maximiser votre Ã©pargne prenez rendez-vous dÃ¨s maintenant avec un de nos conseillers</h4>
            <button class="btn rappeler mt-2 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105">Je souhaite Ãªtre rappelÃ©</button>
        </div>
    </div>
</div>
</div>
    
    
    <div x-show="alert" class="mt-4 text-red-500">Veuillez remplir tous les champs pour continuer.</div>
    <div class="mt-6 flex justify-between">
        <button :class="{'opacity-0 pointer-events-none': step === 1}" x-show="step !== maxStep" x-show="step !== 1 && step !== maxStep" @click="previousStep()" :disabled="step === 1" class="px-4 py-2 bg-gray-300 rounded-md">PrÃ©cÃ©dent</button>
        <button x-show="step !== maxStep" @click="validateForm()" class="px-4 py-2 bg-blue-500 text-white rounded-md">Suivant</button>
        <button x-show="step === maxStep" class="bg-blue-500 hover:bg-blue-600 text-white font-medium text-sm px-6 py-2 rounded-lg mt-4 float-right">
            Retour au site
        </button>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
